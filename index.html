<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Joffrey Bienvenu">
    <link rel="canonical" href="https://wallonia.ml">
    <title>Wallonia.ml - 3D house visualization web app</title>

    <link rel="icon" href="./assets/img/favicon.svg">
    <link rel="mask-icon" href="./assets/img/favicon.svg" color="#000000">

    <link href="./assets/css/bootstrap-reboot.min.css" rel="stylesheet">
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/css/dashboard.css" rel="stylesheet">
    <link href="./assets/css/style.css" rel="stylesheet">
    <link href="./assets/css/leaflet.css" rel="stylesheet">

    <script type="text/javascript" src="./assets/js/libs/leaflet.js"></script>

    <meta property="og:title" content="Wallonia.ml">
    <meta property="og:description" content="Display and get details about any house and apartment in Wallonia by simply entering an address.">
    <meta property="og:image" content="https://wallonia.ml/assets/img/share.png">
    <meta property="og:url" content="https://wallonia.ml">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@Joffreybvn">
</head>
<body>

<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" id="site_title" href="https://wallonia.ml">
        <img src="./assets/img/logo.svg" class="site_logo" height="24px" width="24px" /><p>Wallonia.ml</p></a>
    <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
</header>

<div class="container-fluid" id="content">
    <div class="row" id="content-row">
        <nav id="sidebarMenu" class="col-md-4 col-lg-3 d-md-block bg-light sidebar collapse">
            <div class="position-sticky pt-3">

                <div class="card card-search">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="search-tab" data-toggle="tab" href="#search" role="tab" aria-controls="search" aria-selected="true">
                                    <div class="nav-icon-container"></div>
                                </a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link disabled" id="map-tab" data-toggle="tab" href="#map" role="tab" aria-controls="map" aria-selected="false">
                                    <div class="nav-icon-container"></div>
                                </a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link disabled" id="details-tab" data-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="false">
                                    <div class="nav-icon-container"></div>
                                </a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link disabled" id="share-tab" data-toggle="tab" href="#share" role="tab" aria-controls="share" aria-selected="false">
                                    <div class="nav-icon-container"></div>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="myTabContent">

                            <div class="tab-pane fade show active" id="search" role="tabpanel" aria-labelledby="search-tab">
                                <p class="card-text">Display and get details about any house and apartment in Wallonia by simply entering an address.</p>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item li-tab">
                                        <div class="col-12">
                                            <label for="inputPostalCode" class="col-sm-2 col-form-label form-label">Postal Code</label>
                                            <input id="inputPostalCode" class="form-control" type="text" placeholder="6000" list="datalist-postal-code" autocomplete="off">
                                            <div class="invalid-feedback">Please provide a valid postal code.</div>
                                            <datalist id="datalist-postal-code"></datalist>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputStreetName" class="col-sm-2 col-form-label form-label">Street</label>
                                            <input id="inputStreetName" class="form-control" type="text" placeholder="Square des Martyrs" list="datalist-street-names" autocomplete="off" disabled>
                                            <div class="invalid-feedback">Please provide a valid street name.</div>
                                            <datalist id="datalist-street-names"></datalist>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputHouseNumber" class="col-sm-2 col-form-label form-label">Number</label>
                                            <input id="inputHouseNumber" class="form-control" type="text" placeholder="1" list="datalist-house-numbers" autocomplete="off" disabled>
                                            <div class="invalid-feedback">Please provide a valid house number.</div>
                                            <datalist id="datalist-house-numbers"></datalist>
                                        </div>
                                        <div class="col-12">
                                            <button id="button-submit" class="btn btn-primary btn-block button-submit" disabled>
                                                Display this property
                                            </button>
                                        </div>
                                    </li>
                                </ul>
                            </div>

                            <div class="tab-pane fade" id="map" role="tabpanel" aria-labelledby="map-tab">
                                <div class="street-wrapper">
                                    <div class="street-col">
                                        <h5 class="card-title" id="house-street">Rue de la Poste, 5</h5>
                                        <h6 class="card-subtitle mb-2 text-muted" id="house-city">1435 Mont-Saint-Guibert</h6>
                                    </div>
                                    <div class="street-button">
                                        <button type="button" class="btn btn-primary" id="map-button">See on Map</button>
                                    </div>
                                </div>
                                <div id="house-map"></div>
                            </div>

                            <div class="tab-pane fade" id="details" role="tabpanel" aria-labelledby="details-tab">
                                <table class="table">
                                    <tbody>
                                        <tr title="Land area">
                                            <th scope="row" class="detail-icon">
                                                <img src="./assets/img/card/chart-area.svg" height="32px" alt="Land area"/>
                                            </th>
                                            <td class="detail-text" id="area-land"></td>
                                        </tr>
                                        <tr title="House area">
                                            <th scope="row" class="detail-icon">
                                                <img src="./assets/img/card/expand.svg" height="32px" alt="House area"/>
                                            </th>
                                            <td class="detail-text" id="area-house"></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="card">
                                    <div class="card-body">
                                        <h5 class="card-title">Hide and show elements:</h5>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="button-landMesh" checked>
                                            <label class="form-check-label" for="button-landMesh">Display land</label>
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="button-landLines" checked>
                                            <label class="form-check-label" for="button-landLines">Display land skeleton</label>
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="button-vegetation" checked>
                                            <label class="form-check-label" for="button-vegetation">Display vegetation</label>
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="button-house" checked>
                                            <label class="form-check-label" for="button-house">Display house</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="share" role="tabpanel" aria-labelledby="share-tab">
                                <h5 class="form-label">Share this house</h5>
                                <div class="input-group">
                                    <input type="url" id="sharing-link" class="form-control" aria-describedby="inputGroup-sizing-sm" readonly>
                                    <button class="btn btn-outline-secondary" type="button" id="button-sharing-link">Copy link</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <main class="col-md-8 ml-sm-auto col-lg-9">
            <div id="canvas-placeholder">
                <div class="spinner-border spinner-border-sm" style="width: 10rem; height: 10rem;" role="status"></div>
            </div>
            <div id="canvas-wrapper">
                <canvas id="render" width="100%" height="100%"></canvas>
            </div>
        </main>

        <footer>
            © <a href="https://twitter.com/Joffreybvn">Joffrey Bienvenu</a> - <a href="https://github.com/Joffreybvn/wallonia-ml/blob/main/README.md">About this app</a> - Data source: <a href="http://geoportail.wallonie.be/">Service public de Wallonie</a>
        </footer>
    </div>
</div>

<script type="text/javascript" src="./assets/js/libs/jszip.min.js"></script>
<script type="text/javascript" src="./assets/js/libs/jszip-utils.min.js"></script>

<script type="x-shader/x-vertex" id="vertexShader">
    varying vec3 vWorldPosition;

    void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
</script>

<script type="x-shader/x-fragment" id="fragmentShader">
    uniform vec3 topColor;
    uniform vec3 bottomColor;
    uniform float offset;
    uniform float exponent;

    varying vec3 vWorldPosition;

    void main() {

        float h = normalize( vWorldPosition + offset ).y;
        gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h, 0.0 ), exponent ), 0.0 ) ), 1.0 );

    }
</script>

<script type="module">
    import * as app from './assets/js/app.module.js';
    app.init()
</script>

<script type="text/javascript" src="./assets/js/libs/bootstrap.min.js"></script>
</body>
</html>
